on: [workflow_dispatch]

jobs:
  codemakerai_generation_job:
    runs-on: ubuntu-latest
    name: A job to run codemakerai code generation
    steps:
      # To use this repository's private action,
      # you must check out the repository
      - name: Checkout
        uses: actions/checkout@v3
      - name: Code generation step
        uses: ./ # Uses an action in the root directory
        id: generate
        with:
          api-key: ${{ secrets.CODEMAKER_API_KEY }}
          mode: code
          path: ./example.java
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5.0.2
        with:
          commit-message: Code generated by codemakerai
          branch: codemakerai-generate
